{{ $text := .Params.components }}
{{ $types := slice "Sources" "Transforms" "Sinks" }}
<div class="relative py-12 md:py-16 lg:py-20 px-4 sm:px-6 mx-auto max-w-7xl">
  <div class="text-center">
    {{ partial "home/heading.html" (dict "title" $text.title) }}

    <p class="mt-4 text-xl md:text-2xl font-light text-gray-700 dark:text-gray-200">
      {{ $text.description }}
    </p>
  </div>

  <div class="mt-8 grid grid-cols-2 md:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto">
    {{ range $types }}
    {{ $type := . }}
    {{ $components := where site.RegularPages ".CurrentSection.Params.short" . }}
    {{ $num := len $components }}

    <div class="shadow py-3 px-5">
      <span class="text-xl text-gray-600 dark:text-gray-100 text-primaryfont-light tracking-wide">
        <span class="font-semibold">
          {{ $num }}
        </span>
        {{ $type | lower }}
      </span>

      <div class="mt-4 grid grid-cols-2 gap-y-2 gap-x-3">
        {{ range $components }}
        {{ $title := .Params.short | default .Title }}
        {{ template "component-chip" (dict "title" $title "href" .RelPermalink) }}
        {{ end }}
      </div>
    </div>
    {{ end }}
  </div>
</div>

{{ define "component-chip" }}
<a href="{{ .href }}" class="text-gray-500 dark:text-gray-300 hover:text-secondary dark:hover:text-primary tracking-tight leading-tight">
  {{ .title }}
</a>
{{ end }}