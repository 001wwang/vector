{{ $text := .Params.components }}
{{ $types := slice "Sources" "Transforms" "Sinks" }}
<div class="relative py-12 md:py-16 lg:py-20 px-4 sm:px-6 mx-auto max-w-6xl">
  <div class="text-center">
    {{ partial "home/heading.html" (dict "title" $text.title) }}

    <p class="mt-4 text-xl md:text-2xl font-light text-gray-700 dark:text-gray-200">
      {{ $text.description }}
    </p>
  </div>

  <div class="mt-8 grid grid-cols-2 md:grid-cols-3 gap-8 md:gap-10">
    {{ range $types }}
    {{ $type := . }}
    {{ $components := where site.RegularPages ".CurrentSection.Params.short" . }}
    {{ $num := len $components }}
    <div>
      <span class="text-xl text-gray-600 dark:text-gray-100 text-primaryfont-light tracking-wide">
        <span class="font-extrabold">
          {{ $num }}
        </span>
        {{ $type | lower }}
      </span>

      <div class="mt-6 grid grid-cols-2 gap-0.5">
        {{ range $components }}
        {{ $title := .Params.short | default .Title }}
        {{ template "component-chip" (dict "title" $title "href" .RelPermalink) }}
        {{ end }}
      </div>
    </div>
    {{ end }}
  </div>
</div>

{{ define "component-chip" }}
<a href="{{ .href }}" class="rounded font-semibold text-gray-500 dark:text-gray-300 hover:text-secondary dark:hover:text-primary tracking-tight leading-tight border dark:border-gray-700 py-2.5 px-4 hover:border-secondary dark:hover:border-primary hover:shadow-md">
  {{ .title }}
</a>
{{ end }}