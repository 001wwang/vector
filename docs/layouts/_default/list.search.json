{{- $index := slice -}}
{{- range site.AllPages -}}
{{- $url := .RelPermalink -}}
{{- $title := .Params.short | default .Title -}}
{{- $sectionTitle := (.FirstSection.Params.short | default .FirstSection.Params.Title) | title -}}
{{- $section := cond (eq .Layout "component") "Component" $sectionTitle -}}
{{- $tags := .Params.tags | default slice -}}
{{- $content := .Description | default .Plain -}}
{{- $index = $index | append (dict "objectID" .File.UniqueID "title" $title "tags" $tags "content" $content) -}}
{{- end -}}
{{- $index | jsonify -}}
