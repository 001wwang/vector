{{/* Algolia search index, See the "searchableAttributes" field algolia.js for the list of fields that we send over to Algolia. */}}
{{- $pages := where site.AllPages "Draft" false -}}
{{- $index := slice -}}
{{- range site.AllPages -}}
{{- $url := .RelPermalink -}}
{{- $title := .Params.short | default .Title | markdownify | plainify -}}
{{- $sectionTitle := (.FirstSection.Params.short | default .FirstSection.Params.Title) | title -}}
{{- $section := cond (eq .Layout "component") "Component" $sectionTitle -}}
{{- $tags := .Params.tags | default slice -}}
{{- $content := .Plain -}}
{{- $summary := .Summary -}}
{{- $index = $index | append (dict "objectID" .File.UniqueID "title" $title "tags" $tags "content" $content "section" $section "summary" $summary "url" $url) -}}
{{- end -}}
{{- $index | jsonify -}}
