{{ define "title" }}
Components - Sources, Transforms, and Sinks | {{ site.Title }}
{{ end }}

{{ define "main" }}
{{ $criteria := .Params.criteria }}
{{ $types := slice "Sources" "Transforms" "Sinks" }}
{{ partial "hero.html" . }}

<section class="section my-4" x-data="{ tags: ['source', 'sink', 'transform', 'logs', 'metrics'] }">
  <div class="container">
    <div class="columns is-variable is-6">
      <div class="column is-one-quarter">
        <section class="is-sticky">
          <p class="title is-size-4 is-size-5-mobile has-text-weight-light">
            Criteria
          </p>

          {{ range $map := $criteria }}
          {{ range $k, $v := $map }}
          <p class="has-text-weight-semibold">
            {{ $k }}
          </p>

          <div class="mt-2 mb-3">
            {{ range $v }}
            <label class="checkbox">
              <input type="checkbox">
              {{ . }}
            </label>
            <br />
            {{ end }}
          </div>
          {{ end }}
          {{ end }}
        </section>
      </div>

      <div class="column">
        {{ range $types }}
        {{ $components := where site.RegularPages ".CurrentSection.Params.short" . }}
        {{ template "components" (dict "type" . "components" $components) }}
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}

{{ define "components" }}
{{ $type := .type }}
<p class="title is-size-3 is-size-4-mobile">
  <span class="has-text-weight-light">
    {{ len .components }} {{ $type | lower }}
  </span>
</p>

<div class="columns is-variable is-multiline mb-6">
  {{ range .components }}
  <div class="column is-one-third">
    {{ .Render "component-card-selectable" }}
  </div>
  {{ end }}
</div>
{{ end }}
