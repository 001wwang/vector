{{ $key := .Get 0 }}
{{ $examples := site.Data.docs.remap.examples }}
{{ $first := index $examples 0 }}
<div class="no-prose border rounded flex flex-col divide-y dark:divide-gray-700 dark:border-gray-700">
  {{ range $examples }}
  {{ $input := dict "message" .input.log.message | jsonify }}
  {{ $vrlSourceCode := highlight .source "toml" "" }}
  {{ $output := .output | jsonify (dict "indent" "  ") }}
  {{ $outputCode := highlight $output "json" "" }}
  {{ $id := .title | urlize }}
  <div class="py-4 px-6">
    <span>
      <h3 id="{{ $id }}">
        <a href="#{{ $id }}" class="text-lg font-semibold tracking-tight">
          {{ .title }}
        </a>
      </h3>
    </span>

    <div class="mt-3 flex flex-col space-y-2">
      {{ with .input.log }}
      {{ $json := . | jsonify (dict "indent" "  ") }}
      {{ $code := highlight $json "json" "" }}
      <span>
        Given the following <a href="/docs/about/under-the-hood/architecture/data-model/log">Vector log event</a>...
      </span>
      {{ $code }}
      {{ end }}

      {{ with .input.metric }}
      {{ $json := . | jsonify (dict "indent" "  ") }}
      {{ $code := highlight $json "json" "" }}
      <span>
        Given the following <a href="/docs/about/under-the-hood/architecture/data-model/metric">Vector metric event</a>...
      </span>
      {{ $code }}
      {{ end }}

      <span>
        ...and this VRL program...
      </span>

      {{ $vrlSourceCode }}

      {{ if .raises }}
      {{ $errorCode := highlight .raises.compiletime "ruby" "" }}
      <span>
        ...you should see this error:
      </span>

      {{ $errorCode }}
      {{ else }}
      {{ with .input.log }}
      <span>...the following log event is output:</span>
      {{ end }}

      {{ with .input.metric }}
      <span>...the following metric event is output:</span>
      {{ end }}

      {{ $outputCode }}
      {{ end }}
    </div>
  </div>
  {{ end }}
</div>