{{ $version := .version }}
{{ $host := site.Data.matrix.host }}
{{ $matrix := site.Data.matrix.releases }}
<div class="flex flex-col space-y-1.5">
  {{ range $matrix }}
  {{ $file := .file }}
  {{ $prefix := .prefix }}
  <div class="grid grid-cols-8 items-center">
    <div class="col-span-2">
      <span class="text-gray-700 dark:text-warm-gray-300 text-lg font-semibold">
        {{ .name }}
      </span>
    </div>

    <div class="col-span-1">
      <span class="font-mono text-xs text-dark dark:text-gray-300">
        {{ $file }}
      </span>
    </div>

    <div class="col-span-5">
      <div class="flex space-x-1.5">
        {{ range .releases }}
        <a
          type="button"
          href="{{ $host }}/vector/{{ $version }}/vector-{{ $version }}-{{ with $prefix }}{{ . }}.{{ end }}{{ .tag }}.{{ $file }}"
          class="flex items-center space-x-1 py-1.5 px-2.5 rounded-md dark:border-gray-700 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800"
          download>

          {{/* Heroicon: outline/download */}}
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" class="text-secondary dark:text-primary h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
          </span>
          <span class="text-dark dark:text-primary font-semibold">
            {{ .name }}
          </span>
        </a>
        {{ end }}
      </div>
    </div>
  </div>
  {{ end }}
</div>

{{ $version = cond (eq $version "nightly") "nightly/latest" $version }}
{{ $link := printf "https://packages.timber.io/vector/%s" $version }}
<div class="mt-4">
  <a href="{{ $link }}" class="text-sm text-gray-500 hover:text-dark dark:text-gray-300" target="_blank">
    browse all files...
  </a>
</div>